{% for p in kso.page_list %}
{% if page_absolute_url|contains(p.page_url) %}

{% set hcode1 %}<span class="icon" id="hcode1">{{ kso.icon_1|default("‚úÖ") }}</span> {{ kso.text_1|default("Screen is On") }}{% endset %}
{% set hcode2 %}<span class="icon" id="hcode2">{{ kso.icon_2|default("üîí") }}</span> {{ kso.text_2|default("Keep Screen On") }}{% endset %}
{% set hcode3 %}<span class="icon" id="hcode3">{{ kso.icon_3|default("‚ùå") }}</span> {{ kso.text_3|default("Not Supported") }}{% endset %}

{% set ksoborrad = kso.border_radius|default("25")|split(' ') %}
{% set borrad = ksoborrad|map(n => n ~ 'px')|join(' ') %}

<div id="screen_wake_container" data-hcode1="{{ hcode1|e }}" data-hcode2="{{ hcode2|e }}" data-hcode3="{{ hcode3|e }}">
    <button id="wake_toggle_btn">
        {{ hcode2 }}
    </button>
</div>

{% set kso_top = kso.button_place_vertical == 'top' ? kso.button_margin_vertical|default('20') ~ 'px' : '' %}
{% set kso_bottom = kso.button_place_vertical == 'bottom' ? kso.button_margin_vertical|default('20') ~ 'px' : '' %}

{% set kso_left = kso.button_place_horizonal == 'left' ? kso.button_margin_horizonal|default('20') ~ 'px' : '' %}
{% set kso_right = kso.button_place_horizonal == 'right' ? kso.button_margin_horizonal|default('20') ~ 'px' : '' %}

{% style %}

:root {
    /* Positioning */
    --button-margin-right: {{ kso_right }};
    --button-margin-left: {{ kso_left }};
    --button-margin-bottom: {{ kso_bottom }};
    --button-margin-top: {{ kso_top }};
    
    /* Sizing */
    --min-width: {{ kso.min_width|default('140') }}px;
    --font-size: {{ kso.font_size|default('14') }}px;
    --icon-size: {{ kso.icon_size|default('16') }}px;
    --border-radius: {{ borrad }};
    --z-index: {{ kso.z_index|default('100') }};
    
    /* State 1 Colors */
    --text-color-1: {{ kso.text_color_1|default('white') }};
    --background-color-1: {{ kso.background_color_1|default('#2ecc71') }};
    --text-color-hover-1: {{ kso.text_color_hover_1|default('white') }};
    --background-color-hover-1: {{ kso.background_color_hover_1|default('#27ae60') }};
    
    /* State 2 Colors */
    --text-color-2: {{ kso.text_color_2|default('white') }};
    --background-color-2: {{ kso.background_color_2|default('#e74c3c') }};
    --text-color-hover-2: {{ kso.text_color_hover_2|default('white') }};
    --background-color-hover-2: {{ kso.background_color_hover_2|default('#c0392b') }};
    
    /* State 3 Colors */
    --text-color-3: {{ kso.text_color_3|default('white') }};
    --background-color-3: {{ kso.background_color_3|default('#95a5a6') }};
    --text-color-hover-3: {{ kso.text_color_hover_3|default('white') }};
    --background-color-hover-3: {{ kso.background_color_hover_3|default('#7f8c8d') }};
}

{% endstyle %}

{% endif %}
{% endfor %}
